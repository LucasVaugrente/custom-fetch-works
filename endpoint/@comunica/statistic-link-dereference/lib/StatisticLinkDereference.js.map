{"version":3,"file":"StatisticLinkDereference.js","sourceRoot":"","sources":["StatisticLinkDereference.ts"],"names":[],"mappings":";;;AAAA,+DAA2D;AAE3D,6DAAyD;AAGzD,MAAa,wBAAyB,SAAQ,8BAAoB;IAIhE;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,GAAG,GAAG,gCAAc,CAAC,iBAAiB,CAAC;IAC9C,CAAC;IAEM,eAAe,CAAC,IAAW,EAAE,MAAoB;QACtD,IAAI,CAAC,IAAI,CAAC;YACR,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,QAAQ,EAAE;gBACR,IAAI,EAAE,MAAM,CAAC,WAAW,CAAC,IAAI;gBAC7B,qBAAqB,EAAE,WAAW,CAAC,GAAG,EAAE;gBACxC,gBAAgB,EAAE,IAAI,CAAC,KAAK;gBAC5B,GAAG,IAAI,CAAC,QAAQ;aACjB;YACD,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,SAAS,EAAE,IAAI,CAAC,SAAS;SAC1B,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AAzBD,4DAyBC","sourcesContent":["import { KeysStatistics } from '@comunica/context-entries';\nimport type { ActionContextKey } from '@comunica/core';\nimport { StatisticBase } from '@comunica/statistic-base';\nimport type { ILink, IQuerySource, IStatisticBase } from '@comunica/types';\n\nexport class StatisticLinkDereference extends StatisticBase<ILink> {\n  public count: number;\n  public key: ActionContextKey<IStatisticBase<ILink>>;\n\n  public constructor() {\n    super();\n    this.count = 0;\n    this.key = KeysStatistics.dereferencedLinks;\n  }\n\n  public updateStatistic(link: ILink, source: IQuerySource): boolean {\n    this.emit({\n      url: link.url,\n      metadata: {\n        type: source.constructor.name,\n        dereferencedTimestamp: performance.now(),\n        dereferenceOrder: this.count,\n        ...link.metadata,\n      },\n      context: link.context,\n      transform: link.transform,\n    });\n    this.count++;\n    return true;\n  }\n}\n"]}